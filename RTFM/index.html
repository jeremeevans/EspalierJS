<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>espalier-js-docs</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">espalier-js-docs</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> espalier-js-docs</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="espalierjs">EspalierJS</h1>
				<p>Espalier JS is an easy-to-use grid component for Aurelia.</p>
				<h2 id="how-to-install-espalierjs">How to install EspalierJS</h2>
				<p>EspalierJS is published as an NPM package, and can be added to Aurelia as a plugin.
				To get up and running using EspalierJS, first install it from NPM:</p>
				<pre><code><span class="hljs-meta">$</span><span class="bash"> npm install espalier-js</span>
</code></pre><p>If you&#39;re using the <a href="http://aurelia.io/hub.html#/doc/article/aurelia/framework/latest/the-aurelia-cli">Aurelia CLI</a> 
					(and you should be!), add EspalierJS into your configuration. For the default
				RequireJS Aurelia CLI configuration, add the following to your dependencies:</p>
				<pre><code>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"espalier-js"</span>,
  <span class="hljs-attr">"path"</span>: <span class="hljs-string">"../node_modules/espalier-js/dist/amd"</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"index"</span>,
  <span class="hljs-attr">"resources"</span>: [
    <span class="hljs-string">"**/*.{css,html}"</span>
  ]
}
</code></pre><p>If you are using the Webpack Aurelia CLI configuration, add espalier-js to the <code>ModuleDependenciesPlugin</code>
				in your webpack.config.js as such:</p>
				<pre><code>new <span class="hljs-symbol">ModuleDependenciesPlugin</span>({
  <span class="hljs-string">'aurelia-testing'</span>: [ <span class="hljs-string">'./compile-spy'</span>, <span class="hljs-string">'./view-spy'</span> ],
  <span class="hljs-string">'aurelia-fetch-client'</span>: [ <span class="hljs-string">'./aurelia-fetch-client'</span> ],
  <span class="hljs-string">'espalier-js'</span>: [ <span class="hljs-string">'./index'</span> ]
})
</code></pre><p>Once Espalier is set up in your dependencies, register it as an Aurelia plugin in your application&#39;s main:</p>
				<pre><code><span class="hljs-selector-tag">aurelia</span><span class="hljs-selector-class">.use</span>
  <span class="hljs-selector-class">.standardConfiguration</span>()
  <span class="hljs-selector-class">.feature</span>(<span class="hljs-string">"resources"</span>)
  <span class="hljs-selector-class">.plugin</span>(<span class="hljs-string">"espalier-js"</span>);
</code></pre><p>The EspalierJS grid can now be used by adding an <code>&lt;espalier url=&quot;{api to use}&quot; settings.bind=&quot;gridSettings&quot;&gt;&lt;/espalier&gt;</code>
				element to a page.</p>
				<h2 id="how-to-set-up-a-sweet-pageable-sortable-filterable-grid-in-aurelia">How to set up a sweet pageable, sortable, filterable grid in Aurelia</h2>
				<p>For the most basic configuration for an Espalier grid, add an espalier element to your
					view, specify the API url it will fetch from, and bind it to a settings model in your
				view.</p>
				<p>In your HTML:</p>
				<pre><code>&lt;espalier <span class="hljs-attribute">url</span>=<span class="hljs-string">"/my-api-endpoint"</span> settings.<span class="hljs-attribute">bind</span>=<span class="hljs-string">"gridSettings"</span>&gt;&lt;/espalier&gt;
</code></pre><p>In your view model:</p>
				<pre><code><span class="hljs-keyword">import</span> { IEspalierSettings } from <span class="hljs-string">"espalier-js"</span>;

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewModel</span> {</span>
  <span class="hljs-keyword">public</span> <span class="hljs-string">filter:</span> LookupsFilter;
  <span class="hljs-keyword">public</span> <span class="hljs-string">gridSettings:</span> IEspalierSettings&lt;TRow&gt;;

  <span class="hljs-keyword">public</span> attached() {
    <span class="hljs-keyword">this</span>.gridSettings = {
<span class="hljs-symbol">      columns:</span> [
        { <span class="hljs-string">propertyName:</span> <span class="hljs-string">"Name"</span> }
      ]
    };
  }
}
</code></pre><h2 id="configuring-espalier-globally-to-know-your-api">Configuring Espalier globally to know your API</h2>
				<p>Out of the box Espalier expects your API to accept the following parameters:</p>
				<p><code>{api endpoint}?Page=1&amp;PageSize=10&amp;SortOn=Name&amp;SortOrder=asc</code></p>
				<p>The default sort order tokens are <code>asc</code> and <code>desc</code>. These expectations
					can all be globally configured. The easiest way to globally configure these
					values is to import <code>EspalierConfig</code> into your app class, and set the configuration
					to match your API. Because Aurelia dependency injection treats models such as these as
				a singleton, the values you set in the app class will persist throughout your application. </p>
				<pre><code>import { EspalierConfig } from <span class="hljs-string">"espalier-js"</span><span class="hljs-comment">;</span>

@autoinject
export class App {
  constructor(espalierConfig: EspalierConfig) {
      espalierConfig.defaultPageSize = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
      espalierConfig.pageParameterName = <span class="hljs-string">"filter.page"</span><span class="hljs-comment">;</span>
      espalierConfig.pageSizeParameterName = <span class="hljs-string">"filter.pageSize"</span><span class="hljs-comment">;</span>
      espalierConfig.sortOnParameterName = <span class="hljs-string">"filter.sortOn"</span><span class="hljs-comment">;</span>
      espalierConfig.sortOrderParameterName = <span class="hljs-string">"filter.sortOrder"</span><span class="hljs-comment">;</span>
      espalierConfig.<span class="hljs-keyword">buttonColor </span>= <span class="hljs-string">"rgb(11,66,104)"</span><span class="hljs-comment">;</span>
  }
}
</code></pre><p>View the documentation for <a href="http://jeremeevans.github.io/EspalierJS/RTFM/classes/_src_grid_espalier_config_.espalierconfig.html">EspalierConfig</a> to see all the available options.</p>
				<h2 id="configuring-an-espalier-instance">Configuring an Espalier instance</h2>
				<p>Individual instances of Espalier can be configured both through binding on the element in
					HTML, and an instance of <code>IEspalierSettings&lt;TRow&gt;</code> interface. The options that can be
				bound in the HTML are:</p>
				<h3 id="page-size">page-size</h3>
				<p>A number representing the number of records to fetch per page. This defaults to the value
				set in the global configuration if none is specified. This value is not required.</p>
				<h3 id="default-filter">default-filter</h3>
				<p>The default filter to append to the query string in addition to paging and sorting parameters.
					This value is only used if there is not an advanced filter in place. There is more on advanced
				filtering later in this document. This value is not required.</p>
				<h3 id="url">url</h3>
				<p>The URL Espalier will call (using the Aurelia Fetch Client) to retrieve records to display in
					the grid. If you have configured your fetch client with a base URL, this is a relative path
				to the API endpoint you wish to consume. This value is required.</p>
				<p>The other instance-related options that can be configured using an <a href="http://jeremeevans.github.io/EspalierJS/RTFM/interfaces/_src_grid_espalier_settings_.iespaliersettings.html"><code>IEspalierSettings&lt;TRow&gt;</code></a>.</p>
				<h2 id="filtering-an-espalier-grid">Filtering an Espalier grid</h2>
				<p>To filter an Espalier grid, create a control that implements <a href="http://jeremeevans.github.io/EspalierJS/RTFM/classes/_src_grid_espalier_filter_.espalierfilter.html"><code>EspalierFilter</code></a>.</p>
				<pre><code><span class="hljs-keyword">import</span> { EspalierFilter } <span class="hljs-keyword">from</span> <span class="hljs-string">"espalier-js"</span>;
<span class="hljs-keyword">import</span> { MyFilterModel } <span class="hljs-keyword">from</span> <span class="hljs-string">"./my-filter-model"</span>;
<span class="hljs-keyword">import</span> { customElement } <span class="hljs-keyword">from</span> <span class="hljs-string">"aurelia-framework"</span>;

<span class="hljs-meta">@customElement</span>(<span class="hljs-string">"my-filter"</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> LookupsFilter <span class="hljs-keyword">extends</span> EspalierFilter {
  <span class="hljs-keyword">public</span> container: HTMLFormElement;
  <span class="hljs-keyword">protected</span> model: MyFilterModel = <span class="hljs-keyword">new</span> MyFilterModel();

  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">get</span> appliedFilters(): IFilterToken[] {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.model.getTokens();
  }

  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">get</span> filterAsQueryString(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.model.buildFilter();
  }

  <span class="hljs-keyword">protected</span> clearFilter(): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params">resolve</span>) =&gt; {
      <span class="hljs-keyword">this</span>.resetModel(<span class="hljs-params"></span>);
      resolve(<span class="hljs-params"></span>);
    }</span>);
  }

  <span class="hljs-params">private</span> <span class="hljs-params">resetModel</span><span class="hljs-params">()</span> {
    <span class="hljs-params">this</span>.<span class="hljs-params">model</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>;
  }
}</span>
</code></pre><p>Then import the filter control into the page with the Espalier grid, and bind
				the filter to the grid settings:</p>
				<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">require</span> <span class="hljs-attr">from</span>=<span class="hljs-string">"./my-filter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">require</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Some Data<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">espalier</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"/some-api"</span> <span class="hljs-attr">settings.bind</span>=<span class="hljs-string">"tableSettings"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">espalier</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">my-filter</span> <span class="hljs-attr">view-model.ref</span>=<span class="hljs-string">"filter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre><pre><code><span class="hljs-keyword">import</span> { IEspalierSettings } from <span class="hljs-string">"espalier-js"</span>;
<span class="hljs-keyword">import</span> { IModel } from <span class="hljs-string">"./my-model"</span>;
<span class="hljs-keyword">import</span> { MyFilter } from <span class="hljs-string">"./my-filter"</span>;

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomeData</span> {</span>
  <span class="hljs-keyword">public</span> <span class="hljs-string">filter:</span> MyFilter;
  <span class="hljs-keyword">public</span> <span class="hljs-string">tableSettings:</span> IEspalierSettings&lt;IModel&gt;;

  <span class="hljs-keyword">public</span> attached() {
    <span class="hljs-keyword">this</span>.tableSettings = {
<span class="hljs-symbol">      columns:</span> [
        { <span class="hljs-string">propertyName:</span> <span class="hljs-string">"Name"</span> }
      ],
<span class="hljs-symbol">      filter:</span> <span class="hljs-keyword">this</span>.filter
    };
  }
}
</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_buttons_cell_.html">"src/grid/buttons-<wbr>cell"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_column_definition_.html">"src/grid/column-<wbr>definition"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_enums_.html">"src/grid/enums"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_.html">"src/grid/espalier"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_cell_.html">"src/grid/espalier-<wbr>cell"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_config_.html">"src/grid/espalier-<wbr>config"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_data_formatter_.html">"src/grid/espalier-<wbr>data-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_filter_.html">"src/grid/espalier-<wbr>filter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_page_.html">"src/grid/espalier-<wbr>page"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_espalier_settings_.html">"src/grid/espalier-<wbr>settings"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_currency_formatter_.html">"src/grid/formatters/currency-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_date_formatter_.html">"src/grid/formatters/date-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_formatters_.html">"src/grid/formatters/formatters"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_integer_formatter_.html">"src/grid/formatters/integer-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_number_formatter_.html">"src/grid/formatters/number-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_formatters_text_formatter_.html">"src/grid/formatters/text-<wbr>formatter"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_helpers_.html">"src/grid/helpers"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_page_info_.html">"src/grid/page-<wbr>info"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_grid_table_button_.html">"src/grid/table-<wbr>button"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_src_index_.html">"src/index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_test_main_.html">"test/main"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_test_test_.html">"test/test"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>